WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WPaintedWidget",function(z,l){function o(){var m=[],p,q;for(q=0;q<n.jsValues.length;++q){p=n.jsValues[q];jQuery.isArray(p)&&p.length>6?m.push([]):m.push(p)}return JSON.stringify(m)}this.canvas=document.getElementById("c"+l.id);this.canvas.getContext("2d");jQuery.data(l,"obj",this);var n=this;this.jsValues=[];this.repaint=function(){};l.wtEncodeValue=o});
WT_DECLARE_WT_MEMBER(2,JavaScriptObject,"gfxUtils",function(){function z(){var i=this;this.path_crisp=function(a){return a.map(function(b){return[Math.floor(b[0])+0.5,Math.floor(b[1])+0.5,b[2]]})};this.transform_mult=function(a,b){if(b.length===2){var e=b[0],d=b[1];return[a[l]*e+a[o]*d+a[p],a[n]*e+a[m]*d+a[q]]}if(b.length===3){if(b[2]===x||b[2]===y)return b.slice(0);e=b[0];d=b[1];return[a[l]*e+a[o]*d+a[p],a[n]*e+a[m]*d+a[q],b[2]]}if(b.length===4){var g,f,c,k;f=i.transform_mult(a,[b[0],b[1]]);e=f[0];
g=f[0];d=f[1];f=f[1];for(c=0;c<3;++c){k=i.transform_mult(a,c==0?[i.rect_left(b),i.rect_bottom(b)]:c==1?[i.rect_right(b),i.rect_top(b)]:[i.rect_right(b),i.rect_bottom(b)]);e=Math.min(e,k[0]);g=Math.max(g,k[0]);d=Math.min(d,k[1]);f=Math.max(f,k[1])}return[e,d,g-e,f-d]}if(b.length===6)return[a[l]*b[l]+a[o]*b[n],a[l]*b[o]+a[o]*b[m],a[n]*b[l]+a[m]*b[n],a[n]*b[o]+a[m]*b[m],a[l]*b[p]+a[o]*b[q]+a[p],a[n]*b[p]+a[m]*b[q]+a[q]];return[]};this.transform_apply=function(a,b){var e=i.transform_mult;return b.map(function(d){return e(a,
d)})};this.transform_det=function(a){return a[l]*a[m]-a[o]*a[n]};this.transform_adjoint=function(a){var b=a[l],e=a[n],d=a[o],g=a[m],f=a[p];a=a[q];return[g,-e,-d,b,a*d-f*g,-(a*b-f*e)]};this.transform_inverted=function(a){var b=i.transform_det(a);if(b!=0){a=i.transform_adjoint(a);return[a[l]/b,a[n]/b,a[o]/b,a[m]/b,a[p]/b,a[q]/b]}else{console.log("inverted(): oops, determinant == 0");return a}};this.transform_assign=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5]};this.css_text=
function(a){return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"};this.arcPosition=function(a,b,e,d,g){g=-g/180*Math.PI;return[a+e*Math.cos(g),b+d*Math.sin(g)]};this.pnpoly=function(a,b){var e=false,d=0,g=0,f=a[0];a=a[1];var c,k,j;for(c=0;c<b.length;++c){k=d;j=g;if(b[c][2]===A){j=i.arcPosition(b[c][0],b[c][1],b[c+1][0],b[c+1][1],b[c+2][0]);k=j[0];j=j[1]}else if(b[c][2]===y){j=i.arcPosition(b[c-2][0],b[c-2][1],b[c-1][0],b[c-1][1],b[c][0]+b[c][1]);k=j[0];j=j[1]}else if(b[c][2]!==x){k=b[c][0];j=b[c][1]}if(b[c][2]!==
v)if(g>a!==j>a&&f<(k-d)*(a-g)/(j-g)+d)e=!e;d=k;g=j}return e};this.drawRect=function(a,b,e,d){b=i.rect_normalized(b);var g=i.rect_top(b),f=i.rect_bottom(b),c=i.rect_left(b);b=i.rect_right(b);path=[[c,g,v],[b,g,r],[b,f,r],[c,f,r],[c,g,r]];i.drawPath(a,path,e,d,false)};this.drawPath=function(a,b,e,d,g){function f(s){return s[0]}function c(s){return s[1]}function k(s){return s[2]}var j=0,t=[],u=[],w=[];a.beginPath();b.length>0&&k(b[0])!==v&&a.moveTo(0,0);for(j=0;j<b.length;j++){var h=b[j];switch(k(h)){case v:a.moveTo(f(h),
c(h));break;case r:a.lineTo(f(h),c(h));break;case B:t.push(f(h),c(h));break;case C:t.push(f(h),c(h));break;case D:t.push(f(h),c(h));a.bezierCurveTo.apply(a,t);t=[];break;case A:u.push(f(h),c(h));break;case x:u.push(f(h));break;case y:u.push(f(h)*Math.PI/180,c(h)*Math.PI/180,c(h)>0);a.arc.apply(a,u);u=[];break;case E:w.push(f(h));break;case F:w.push(f(h),c(h));a.quadraticCurveTo.apply(a,w);w=[];break}}e&&a.fill();d&&a.stroke();g&&a.clip()};this.rect_top=function(a){return a[1]};this.rect_bottom=function(a){return a[1]+
a[3]};this.rect_right=function(a){return a[0]+a[2]};this.rect_left=function(a){return a[0]};this.rect_topleft=function(a){return[a[0],a[1]]};this.rect_topright=function(a){return[a[0]+a[2],a[1]]};this.rect_bottomleft=function(a){return[a[0],a[1]+a[3]]};this.rect_bottomright=function(a){return[a[0]+a[2],a[1]+a[3]]};this.rect_center=function(a){return{x:(2*a[0]+a[2])/2,y:(2*a[1]+a[3])/2}};this.rect_normalized=function(a){var b,e,d;if(a[2]>0){b=a[0];d=a[2]}else{b=a[0]+a[2];d=-a[2]}if(a[3]>0){e=a[1];
a=a[3]}else{e=a[1]+a[3];a=-a[3]}return[b,e,d,a]}}var l=0,o=1,n=2,m=3,p=4,q=5,v=0,r=1,B=2,C=3,D=4,E=5,F=6,A=7,x=8,y=9;return new z}());
