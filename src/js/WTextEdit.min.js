WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTextEdit",function(m,b){jQuery.data(b,"obj",this);var o,p,q=this,c=m.WT,r;if(!tinymce.dom.Event.domLoaded)tinymce.dom.Event.domLoaded=true;tinyMCE.init({mode:"none"});this.render=function(a,f,d){r=f;b.ed=new tinymce.Editor(b.id,a,tinymce.EditorManager);b.ed.render();if(d)tinymce.EditorManager.majorVersion<4?b.ed.onChange.add(function(){m.emit(b,"change")}):b.ed.on("change",function(){m.emit(b,"change")});m.emit(b,"render")};this.init=function(){var a=
c.getElement(b.id+"_ifr"),f,d;if(tinymce.EditorManager.majorVersion<4){d=f=a.parentNode.parentNode.parentNode.parentNode;f=f.parentNode}else f=a.parentNode.parentNode.parentNode;if(d){d.style.cssText="width:100%;"+r;b.style.height=d.offsetHeight+"px"}f.wtResize=b.wtResize;c.isGecko?setTimeout(function(){q.wtResize(b,o,p)},100):q.wtResize(b,o,p);$((c.isIE?document.frames[a.id].document:a.contentDocument).body).bind("paste",function(k){function e(n){return n.indexOf("image/")==0}var h=k.clipboardData||
k.originalEvent.clipboardData,j,l;if(h&&h.types){j=0;for(l=h.types.length;j<l;++j)if(e(h.types[j])||e(h.items[j].type)){var i=h.items[j].getAsFile(),g=new FileReader;g.onload=function(){b.ed.insertContent('<img src="'+this.result+'"></img>')};g.readAsDataURL(i);c.cancelEvent(k)}}})};this.wtResize=function(a,f,d){if(!(d<0)){var k=c.getElement(a.id+"_ifr");if(k){var e=0;c.px(a,"marginLeft");c.px(a,"marginRight");e=c.px(a,"marginTop")+c.px(a,"marginBottom");if(!c.boxSizing(a)){c.px(a,"borderLeftWidth");
c.px(a,"borderRightWidth");c.px(a,"paddingLeft");c.px(a,"paddingRight");e+=c.px(a,"borderTopWidth")+c.px(a,"borderBottomWidth")+c.px(a,"paddingTop")+c.px(a,"paddingBottom")}a.style.height=d-e+"px";var h,j=b.style.position!=="absolute";if(tinymce.EditorManager.majorVersion<4){var l=k.parentNode.parentNode,i=l.parentNode.parentNode,g,n;h=i;e=i.parentNode;if(!j&&typeof f!=="undefined")e.style.width=f-2+"px";g=0;for(n=i.rows.length;g<n;g++)if(i.rows[g]!=l)d-=i.rows[g].offsetHeight}else{l=k.parentNode;
i=l.parentNode;e=i.parentNode;if(!j&&typeof f!=="undefined")e.style.width=f-2+"px";g=0;for(n=i.childNodes.length;g<n;g++)if(i.childNodes[g]!=l)d-=i.childNodes[g].offsetHeight+1;d-=1}if(!(d<0)){d+="px";if(j){e.style.position="static";e.style.display="block"}else{e.style.position=a.style.position;e.style.left=a.style.left;e.style.top=a.style.top;if(!j&&h)h.style.width=f+"px";if(h){h.style.height=d+"px";e.style.height=a.style.height}}if(k.style.height!=d){k.style.height=d;m.layouts2&&m.layouts2.setElementDirty(b)}}}else{o=
f;p=d}}};p=b.offsetHeight;o=b.offsetWidth});
