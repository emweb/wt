WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(B,F,K,N,S,L,u,G,A,y,z){function C(a,b,c){var g=t[b],h=a.style[g.left],p;w(a,g.left,"-1000000px");var j=b?a.scrollHeight:a.scrollWidth,s=b?a.clientHeight:a.clientWidth;if(e.isGecko){p=a.style[g.size];w(a,g.size,"")}b=b?a.offsetHeight:a.offsetWidth;w(a,g.left,h);e.isGecko&&w(a,g.size,p);if(s>=1E6)s-=1E6;if(j>=1E6)j-=1E6;if(b>=1E6)b-=1E6;if(j===0){j=e.pxself(a,g.size);if(j!==0&&!e.isOpera&&!e.isGecko)j-=e.px(a,"border"+g.Left+"Width")+
e.px(a,"border"+g.Right+"Width")}if(e.isIE&&(e.hasTag(a,"BUTTON")||e.hasTag(a,"TEXTAREA")||e.hasTag(a,"INPUT")||e.hasTag(a,"SELECT")))j=s;if(j>b)if(e.pxself(a,g.size)==0)j=0;else{var d=false;$(a).find(".Wt-popup").each(function(){if(this.style.display!=="none")d=true});if(d)j=0}if(c)return j;e.isOpera||(j+=e.px(a,"border"+g.Left+"Width")+e.px(a,"border"+g.Right+"Width"));j+=e.px(a,"margin"+g.Left)+e.px(a,"margin"+g.Right);if(!e.boxSizing(a)&&!e.isIE)j+=e.px(a,"padding"+g.Left)+e.px(a,"padding"+g.Right);
if(j<b)j=b;a=e.px(a,"max"+g.Size);if(a>0)j=Math.min(a,j);return Math.round(j)}function x(a,b){b=t[b];if(a.style.display==="none")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var c=e.px(a,"min"+b.Size);e.boxSizing(a)||(c+=e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right));return c}}function H(a,b){b=t[b];var c=e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right);if(!e.boxSizing(a)&&!(e.isIE&&!e.isIElt9&&e.hasTag(a,"BUTTON")))c+=e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+
b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right);return c}function J(a,b){b=t[b];return e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right)}function X(a,b){if(e.boxSizing(a)){b=t[b];return e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right)}else return 0}function T(a,b){b=t[b];return Math.round(e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right)+e.px(a,"padding"+
b.Left)+e.px(a,"padding"+b.Right))}function O(a,b){U=a.dirty=true;b&&B.layouts2.scheduleAdjust()}function w(a,b,c){if(a.style[b]!==c){a.style[b]=c;return true}else return false}function da(a,b,c){b=t[a];var g=t[a^1],h=b.measures,p=b.config.length,j=g.config.length;if(U||M){if(c&&typeof b.minSize=="undefined"){b.minSize=e.px(c,"min"+b.Size);if(b.minSize>0)b.minSize-=X(c,a)}h=h.slice();if(h.length==5){h[0]=h[0].slice();h[1]=h[1].slice()}var s=[],d=[],n=0,l=0,i,D,q=false;for(i=0;i<p;++i){var k=0,r=b.config[i][2],
o=true;for(D=0;D<j;++D){var f=b.getItem(i,D);if(f){if(!f.w||a==0&&f.dirty){var m=$("#"+f.id),v=m.get(0);if(v!=f.w){f.w=v;m.find("img").add(m.filter("img")).bind("load",{item:f},function(Z){O(Z.data.item,true)});f.w.style[b.left]=f.w.style[g.left]="-1000000px"}}if(!L&&f.w.style.position!="absolute"){f.w.style.position="absolute";f.w.style.visibility="hidden";if(!f.w.wtResize&&!e.isIE){f.w.style.boxSizing="border-box";if(m=e.cssPrefix("BoxSizing"))f.w.style[m+"BoxSizing"]="border-box"}}if(!f.ps)f.ps=
[];if(!f.ms)f.ms=[];if(!f.size)f.size=[];if(!f.psize)f.psize=[];if(!f.fs)f.fs=[];if($(f.w).hasClass("Wt-hidden"))f.ps[a]=f.ms[a]=0;else{m=!f.set;if(!f.set)f.set=[false,false];if(f.w){if(e.isIE)f.w.style.visibility="";if(f.dirty||M){v=x(f.w,a);if(v>r)r=v;f.ms[a]=v;if(!f.set[a])if(a==0||!m){m=e.pxself(f.w,b.size);f.fs[a]=m?m+H(f.w,a):0}else{m=Math.round(e.px(f.w,b.size));f.fs[a]=m>Math.max(X(f.w,a),v)?m+H(f.w,a):0}m=f.fs[a];if(f.layout){if(m==0)m=f.ps[a]}else{if(f.wasLayout){f.wasLayout=false;f.set=
[false,false];f.ps-=0.1;f.w.wtResize&&f.w.wtResize(f.w,-1,-1,true);w(f.w,t[1].size,"")}v=C(f.w,a,false);var E=f.set[a];if(E)if(f.psize[a]>8)E=v>=f.psize[a]-2&&v<=f.psize[a]+2;var V=typeof f.ps[a]!=="undefined"&&b.config[i][0]>0&&f.set[a];m=E||V?Math.max(m,f.ps[a]):Math.max(m,v)}f.ps[a]=m;if(!f.span||f.span[a]==1){if(m>k)k=m}else q=true}else if(!f.span||f.span[a]==1){if(f.ps[a]>k)k=f.ps[a];if(f.ms[a]>r)r=f.ms[a]}else q=true;if((f.w.style.display!=="none"||e.hasTag(f.w,"TEXTAREA")&&f.w.wtResize)&&(!f.span||
f.span[a]==1))o=false}}}}if(o)r=k=-1;else if(r>k)k=r;s[i]=k;d[i]=r;if(r>-1){n+=k;l+=r}}if(q)for(i=0;i<p;++i)for(D=0;D<j;++D)if((f=b.getItem(i,D))&&f.span&&f.span[a]>1){g=f.ps[a];for(si=k=q=0;si<f.span[a];++si){r=s[i+si];if(r!=-1){g-=r;++q;if(b.config[i+si][0]>0)k+=b.config[i+si][0]}}if(g>0)if(q>0){if(k>0)q=k;for(si=0;si<f.span[a];++si){r=s[i+si];if(r!=-1){r=k>0?b.config[i+si][0]:1;if(r>0){o=Math.round(g/r);g-=o;q-=r;s[i+si]+=o}}}}else s[i]=g}j=0;m=true;D=false;for(i=0;i<p;++i)if(d[i]>-1){if(m){j+=
b.margins[1];m=false}else{j+=b.margins[0];if(D)j+=4}D=b.config[i][1]!==0}m||(j+=b.margins[2]);n+=j;l+=j;b.measures=[s,d,n,l,j];if(M||h[2]!=b.measures[2])P.updateSizeInParent(a);c&&b.minSize==0&&h[3]!=b.measures[3]&&c.parentNode.className!="Wt-domRoot"&&w(c,"min"+b.Size,b.measures[3]+"px")&&P.ancestor&&P.ancestor.setContentsDirty(c);c&&a==0&&c&&e.hasTag(c,"TD")&&w(c,b.size,b.measures[2]+"px")}}function ea(a,b,c){a=t[a];if(W)c=-c;if(a.config[b][0]>0&&a.config[b+1][0]==0){++b;c=-c}a.fixedSize[b]=a.sizes[b]+
c;B.layouts2.scheduleAdjust()}function fa(a,b,c){var g=b.di,h=t[a],p=t[a^1],j,s=e.getElement(F),d;for(d=g-1;d>=0;--d)if(h.sizes[d]>=0){j=-(h.sizes[d]-h.measures[1][d]);break}g=h.sizes[g]-h.measures[1][g];if(W){var n=j;j=-g;g=-n}new e.SizeHandle(e,h.resizeDir,e.pxself(b,h.size),e.pxself(b,p.size),j,g,h.resizerClass,function(l){ea(a,d,l)},b,s,c,0,0)}function ga(a,b){var c=t[a],g=t[a^1],h=c.measures,p=0,j=false,s=false,d=false,n=aa?b.parentNode:null;if(c.maxSize===0)if(n){var l=e.css(n,"position");if(l===
"absolute")p=e.pxself(n,c.size);if(p===0){if(!c.initialized){if(a===0&&(l==="absolute"||l==="fixed")){n.style.display="none";p=n.clientWidth;n.style.display=""}p=a?n.clientHeight:n.clientWidth;j=true;if(a==0&&p==0&&e.isIElt9){p=n.offsetWidth;j=false}var i;if((e.hasTag(n,"TD")||e.hasTag(n,"TH"))&&!(e.isIE&&!e.isIElt9)){d=0;i=1}else{d=c.minSize?c.minSize:h[3];i=0}function D(V,Z){return Math.abs(V-Z)<1}if(e.isIElt9&&D(p,i)||D(p,d+J(n,a)))c.maxSize=999999}if(p===0&&c.maxSize===0){p=a?n.clientHeight:n.clientWidth;
j=true}}}else{p=e.pxself(b,c.size);s=true}else if(c.sizeSet){p=e.pxself(n,c.size);s=true}var q=0;if(n&&n.wtGetPS&&a==1)q=n.wtGetPS(n,b,a,0);d=h[2];if(d<c.minSize)d=c.minSize;if(c.maxSize&&!c.sizeSet)if(d+q<c.maxSize){w(n,c.size,d+q+X(n,a)+"px")&&B.layouts2.remeasure();p=d+q;d=s=true}else{p=c.maxSize;j=false}c.cSize=p;if(a==1&&n&&n.wtResize){i=g.cSize;d=c.cSize;n.wtResize(n,Math.round(i),Math.round(d),true)}p-=q;if(!s){s=0;if(typeof c.cPadding==="undefined"){s=j?J(n,a):X(n,a);c.cPadding=s}else s=c.cPadding;
p-=s}c.initialized=true;if(!(n&&p<=0)){if(p<h[3]-q)p=h[3]-q;j=[];n=c.config.length;s=g.config.length;for(d=0;d<n;++d)c.stretched[d]=false;if(p>=h[3]-q){q=p-h[4];i=[];var k=[0,0],r=[0,0],o=0;for(d=0;d<n;++d)if(h[1][d]>-1){l=-1;if(typeof c.fixedSize[d]!=="undefined"&&(d+1==n||h[1][d+1]>-1))l=c.fixedSize[d];else if(c.config[d][1]!==0&&c.config[d][1][0]>=0){l=c.config[d][1][0];if(c.config[d][1][1])l=(p-h[4])*l/100}if(l>=0){i[d]=-1;j[d]=l;q-=j[d]}else{if(c.config[d][0]>0){l=1;i[d]=c.config[d][0];o+=i[d]}else{l=
0;i[d]=0}k[l]+=h[1][d];r[l]+=h[0][d];j[d]=h[0][d]}}else{i[d]=-2;j[d]=-1}if(o==0){for(d=0;d<n;++d)if(i[d]==0){i[d]=1;++o}r[1]=r[0];k[1]=k[0];r[0]=0;k[0]=0}if(q>r[0]+k[1]){q-=r[0];if(q>r[1]){if(c.fitSize){q-=r[1];q=q/o;for(d=0;d<n;++d)if(i[d]>0){j[d]+=Math.round(i[d]*q);c.stretched[d]=true}}}else{l=1;if(q<k[l])q=k[l];q=r[l]-k[l]>0?(q-k[l])/(r[l]-k[l]):0;for(d=0;d<n;++d)if(i[d]>0){k=h[0][d]-h[1][d];j[d]=h[1][d]+Math.round(k*q)}}}else{for(d=0;d<n;++d)if(i[d]>0)j[d]=h[1][d];q-=k[1];l=0;if(q<k[l])q=k[l];
q=r[l]-k[l]>0?(q-k[l])/(r[l]-k[l]):0;for(d=0;d<n;++d)if(i[d]==0){k=h[0][d]-h[1][d];j[d]=h[1][d]+Math.round(k*q)}}}else j=h[1];c.sizes=j;h=c.margins[1];q=true;k=false;for(d=0;d<n;++d){if(j[d]>-1){var f=k;if(k){i=F+"-rs"+a+"-"+d;k=e.getElement(i);if(!k){k=document.createElement("div");k.setAttribute("id",i);k.di=d;k.style.position="absolute";k.style[g.left]=g.margins[1]+"px";k.style[c.size]=c.margins[0]+"px";if(g.cSize)k.style[g.size]=g.cSize-g.margins[2]-g.margins[1]+"px";k.className=c.handleClass;
b.insertBefore(k,b.firstChild);k.onmousedown=k.ontouchstart=function(V){fa(a,this,V||window.event)}}h+=2;w(k,c.left,h+"px");h+=2}k=c.config[d][1]!==0;if(q)q=false;else h+=c.margins[0]}for(r=0;r<s;++r)if((o=c.getItem(d,r))&&o.w){i=o.w;l=Math.max(j[d],0);if(o.span){var m,v=k;for(m=1;m<o.span[a];++m){if(d+m>=j.length)break;if(v)l+=4;v=c.config[d+m][1]!==0;if(j[d+m-1]>-1&&j[d+m]>-1)l+=c.margins[0];l+=j[d+m]}}var E;w(i,"visibility","");v=o.align>>c.alignBits&15;m=o.ps[a];if(l<m)v=0;if(v){switch(v){case 1:E=
h;break;case 4:E=h+(l-m)/2;break;case 2:E=h+(l-m);break}m-=H(o.w,a);if(o.layout){w(i,c.size,m+"px")&&O(o);o.set[a]=true}else if(l>=m&&o.set[a]){w(i,c.size,m+"px")&&O(o);o.set[a]=false}o.size[a]=m;o.psize[a]=m}else{E=H(o.w,a);v=Math.max(0,l-E);if(!e.isIE&&e.hasTag(i,"TEXTAREA"))v=l;E=false;if(e.isIE&&e.hasTag(i,"BUTTON"))E=true;if(i.style.display!=="none"&&(E||l!=m||o.layout)){w(i,c.size,v+"px")&&O(o);o.set[a]=true}else if(o.fs[a])a==0&&w(i,c.size,o.fs[a]+"px");else{w(i,c.size,"")&&O(o);o.set[a]=false}E=
h;o.size[a]=v;o.psize[a]=l}if(L)if(f){w(i,c.left,"4px");l=e.css(i,"position");if(l!=="absolute")i.style.position="relative"}else w(i,c.left,"0px");else w(i,c.left,E+"px");if(a==1){if(i.wtResize)i.wtResize(i,o.set[0]?Math.round(o.size[0]):-1,o.set[1]?Math.round(o.size[1]):-1,true);o.dirty=false}}if(j[d]>-1)h+=j[d]}$(b).children("."+g.handleClass).css(c.size,p-c.margins[2]-c.margins[1]+"px")}}var e=B.WT;this.ancestor=null;this.descendants=[];var P=this,I=z,U=false,M=true,aa=false,Y=null,Q=null,ba=false,
R=[],ca=false,W=$(document.body).hasClass("Wt-rtl"),t=[{initialized:false,config:I.cols,margins:A,maxSize:u,measures:[],sizes:[],stretched:[],fixedSize:[],Left:W?"Right":"Left",left:W?"right":"left",Right:W?"Left":"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return I.items[b*t[0].config.length+a]},handleClass:"Wt-vrh2",resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:N},{initialized:false,config:I.rows,margins:y,maxSize:G,measures:[],sizes:[],stretched:[],fixedSize:[],Left:"Top",
left:"top",Right:"Bottom",Size:"Height",size:"height",alignBits:4,getItem:function(a,b){return I.items[a*t[0].config.length+b]},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",fitSize:S}];jQuery.data(document.getElementById(F),"layout",this);this.updateSizeInParent=function(a){if(Y){var b=t[a],c=b.measures[2];if(b.maxSize>0)c=Math.min(b.maxSize,c);if(ca){b=e.getElement(F);if(!b)return;for(var g=b,h=g.parentNode;;){if(h.wtGetPS)c=h.wtGetPS(h,g,a,c);c+=T(h,a);if(h==Q)break;if(h==b.parentNode&&
!h.lh&&h.offsetHeight>c)c=h.offsetHeight;g=h;h=g.parentNode}}else c+=R[a];Y.setChildSize(Q,a,c)}};this.setConfig=function(a){var b=I;I=a;t[0].config=I.cols;t[1].config=I.rows;t[0].stretched=[];t[1].stretched=[];var c;a=0;for(c=b.items.length;a<c;++a){var g=b.items[a];if(g){if(g.set){g.set[0]&&w(g.w,t[0].size,"");g.set[1]&&w(g.w,t[1].size,"")}if(g.layout){P.setChildSize(g.w,0,g.ps[0]);P.setChildSize(g.w,1,g.ps[1])}}}M=true;B.layouts2.scheduleAdjust()};this.getId=function(){return F};this.setItemsDirty=
function(a){var b,c,g=t[0].config.length;b=0;for(c=a.length;b<c;++b){var h=I.items[a[b][0]*g+a[b][1]];h.dirty=true;if(h.layout){h.layout=false;h.wasLayout=true;B.layouts2.setChildLayoutsDirty(P,h.w)}}U=true};this.setDirty=function(){M=true};this.setChildSize=function(a,b,c){var g=t[0].config.length,h=t[b],p,j;p=0;for(j=I.items.length;p<j;++p){var s=I.items[p];if(s&&s.id==a.id){a=b===0?p%g:p/g;if(s.align>>h.alignBits&15||!h.stretched[a]){if(!s.ps)s.ps=[];s.ps[b]=c}s.layout=true;O(s);break}}};this.measure=
function(a){var b=e.getElement(F);if(b)if(!e.isHidden(b)){if(!ba){ba=true;if(aa=K==null){var c=b;c=c.parentNode;for(R=[0,0];;){R[0]+=T(c,0);R[1]+=T(c,1);if(c.wtGetPS)ca=true;var g=jQuery.data(c.parentNode,"layout");if(g){Y=g;Q=c;break}c=c;c=c.parentNode;if(c.childNodes.length!=1&&!c.wtGetPS)break}c=b.parentNode;for(g=0;g<2;++g)t[g].sizeSet=e.pxself(c,t[g].size)!=0}else{Y=jQuery.data(document.getElementById(K),"layout");Q=b;R[0]=T(Q,0);R[1]=T(Q,1)}}if(U||M){c=aa?b.parentNode:null;da(a,b,c)}if(a==1)U=
M=false}};this.setMaxSize=function(a,b){t[0].maxSize=a;t[1].maxSize=b};this.apply=function(a){var b=e.getElement(F);if(!b)return false;if(e.isHidden(b))return true;ga(a,b);return true};this.contains=function(a){var b=e.getElement(F);a=e.getElement(a.getId());return b&&a?e.contains(b,a):false};this.WT=e});WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var B=[],F=false,K=this,N=false;this.find=function(u){return jQuery.data(document.getElementById(u),"layout")};this.setDirty=function(u){(u=jQuery.data(u,"layout"))&&u.setDirty()};this.setChildLayoutsDirty=function(u,G){var A,y;A=0;for(y=u.descendants.length;A<y;++A){var z=u.descendants[A];if(G){var C=u.WT.getElement(z.getId());if(C&&!u.WT.contains(G,C))continue}z.setDirty()}};this.add=function(u){function G(A,y){var z,C;z=0;for(C=
A.length;z<C;++z){var x=A[z];if(x.getId()==y.getId()){A[z]=y;y.descendants=x.descendants;return}else if(x.contains(y)){G(x.descendants,y);return}else if(y.contains(x)){y.descendants.push(x);A.splice(z,1);--z;--C}}A.push(y)}G(B,u);K.scheduleAdjust()};var S=false,L=false;this.scheduleAdjust=function(u){if(u)N=true;if(!S){S=true;setTimeout(function(){K.adjust()},0)}};this.adjust=function(u,G){function A(z,C){var x,H;x=0;for(H=z.length;x<H;++x){var J=z[x];A(J.descendants,C);C==1&&N&&J.setDirty();J.measure(C)}}
function y(z,C){var x,H;x=0;for(H=z.length;x<H;++x){var J=z[x];if(J.apply(C))y(J.descendants,C);else{z.splice(x,1);--x;--H}}}if(u){(u=this.find(u))&&u.setItemsDirty(G);K.scheduleAdjust()}else{S=false;if(!F){F=true;L=false;A(B,0);y(B,0);A(B,1);y(B,1);if(L){A(B,0);y(B,0);A(B,1);y(B,1)}N=L=F=false}}};this.updateConfig=function(u,G){(u=this.find(u))&&u.setConfig(G)};this.remeasure=function(){L=true};window.onresize=function(){K.scheduleAdjust(true)};window.onshow=function(){N=true;K.adjust()}}));
