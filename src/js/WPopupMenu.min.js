WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WPopupMenu",(function(e,t,n,o){t.wtObj=this;const i=e.WT,s="Wt-AutoHideDelay-",u=0,r=1,c=2;let a=o,d=null,l=null,f=null,m=null;if(i.isIOS){t.addEventListener("touchstart",W);t.addEventListener("touchend",k)}function v(){E(t,null);t.style.display="none";setTimeout((function(){e.emit(t.id,"cancel")}),0)}function p(e,t){e.classList.toggle("active",t)}function L(e){if(e.subMenu)return e.subMenu;{const t=e.lastChild;if(t&&i.hasTag(t,"UL")){e.subMenu=t;t.parentItem=e;t.addEventListener("mousemove",h);g(t,e);return t}return null}}function E(e,t){function n(e,t){if(e===t)return!0;if(t){const o=t.parentNode.parentItem;return!!o&&n(e,o)}return!1}!function e(o){for(const i of o.childNodes)if(n(i,t)){if(i!==t){const t=L(i);t&&e(t)}}else{p(i,!1);const t=L(i);if(t){t.style.display="none";e(t)}}}(e)}function h(e){let n=i.target(e);for(;n&&!i.hasTag(n,"LI")&&!i.hasTag(n,"UL");)n=n.parentNode;if(i.hasTag(n,"LI")){if(n===l)return;l=n;p(n,!0);const e=L(n);e&&function(e){e.style.display="block";if(e.parentNode===e.parentItem){e.parentNode.removeChild(e);t.parentNode.appendChild(e)}const n=i.px(e,"paddingTop")+i.px(e,"borderTopWidth");i.positionAtWidget(e.id,e.parentItem.id,i.Horizontal,-n,e.classList.contains("Wt-AdjustX"),e.classList.contains("Wt-AdjustY"));E(e,null);f=e;if(i.isIOS){e.removeEventListener("touchstart",W);e.addEventListener("touchstart",W);e.removeEventListener("touchend",k);e.addEventListener("touchend",k)}}(e);E(t,n)}}function y(){for(;f&&"none"===f.style.display;)f=f.parentItem?f.parentItem.parentNode:null;return f}function b(){clearTimeout(d)}function T(e){let t=-1;for(const n of e.classList)if(n.startsWith(s)){const e=n.substring(s.length),o=parseInt(e);isNaN(o)||(t=o)}return t}function g(e,t=null){let o;e.wtObj||(e.wtObj={});e.wtObj.mouseEnter=function(){clearTimeout(o);t&&t.parentNode.wtObj.mouseEnter()};e.wtObj.mouseLeave=function(){const n=T(e);if(t){if(n>=0){clearTimeout(o);o=setTimeout((function(){const n=y();if("none"!==e.style.display&&(a!==r||!n||T(n)>=0)){l=null;E(t.parentNode,null)}}),n)}(a===u||a===r&&n>=0)&&t.parentNode.wtObj.mouseLeave()}};if(t){t.parentNode.addEventListener("mouseleave",e.wtObj.mouseLeave);t.parentNode.addEventListener("mouseenter",e.wtObj.mouseEnter);e.addEventListener("mouseleave",e.wtObj.mouseLeave);e.addEventListener("mouseenter",e.wtObj.mouseEnter)}e.addEventListener("mouseleave",(function(){a===c&&t||function(){clearTimeout(d);n>=0&&(d=setTimeout((function(){const e=y();(a!==r||!e||T(e)>=0)&&v()}),n))}()}));e.addEventListener("mouseenter",b)}function w(){return null!==document.getElementById(t.id)}function O(e){w()&&1!==i.button(e)&&v()}function I(){w()&&v()}function N(e){w()&&27===e.keyCode&&v()}this.setAutoHideBehaviour=function(e){a=e};this.setHidden=function(e){if(d){clearTimeout(d);d=null}l=null;if(e){t.style.position="";t.style.display="none";t.style.left="";t.style.top="";document.removeEventListener("mousedown",O);!function(){if(i.isIOS){document.removeEventListener("touchstart",j);document.removeEventListener("touchend",M)}else document.removeEventListener("click",I)}();document.removeEventListener("keydown",N)}else{setTimeout((function(){document.addEventListener("mousedown",O);!function(){if(i.isIOS){document.addEventListener("touchstart",j);document.addEventListener("touchend",M)}else document.addEventListener("click",I)}();document.addEventListener("keydown",N)}),0);t.style.display="block"}E(t,null)};this.popupAt=function(e){g(e)};function j(e){const t=e.originalEvent.touches;m=t.length>1?null:{x:t[0].screenX,y:t[0].screenY}}function W(e){e.stopPropagation()}function M(e){if(m){const t=e.originalEvent.changedTouches[0];Math.abs(m.x-t.screenX)<20&&Math.abs(m.y-t.screenY)<20&&I();m=null}}function k(e){e.stopPropagation()}setTimeout((function(){g(t)}),0);t.addEventListener("mousemove",h)}));