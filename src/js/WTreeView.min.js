WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",(function(t,e,i,s,n,l){e.wtObj=this;const o=i.firstChild,d=s.firstChild;let c=!1,u=!1,a=null,r=null,h=null;const f=this,m=t.WT;t.treeViewRegistered||(t.treeViewRegistered=[]);t.treeViewRegistered.push(f);let p=!1,w=!1,g=!1;function v(t){let i=-1,s=null,n=!1,o=!1,d=null,c=m.target(t);for(;c&&c!==e;){if(m.hasTag(c,"LI")){-1===i&&(i=0);s=c.id;break}if(c.className&&0===c.className.indexOf("Wt-tv-c")){0===c.className.indexOf("Wt-tv-c")?i=1*c.className.split(" ")[0].substring(7):-1===i&&(i=0);"true"===c.getAttribute("drop")&&(o=!0);d=c}c.classList.contains(l)&&(n=!0);c=c.parentNode}return{columnId:i,nodeId:s,selected:n,drop:o,el:d}}this.click=function(i,s){const n=v(s);-1!==n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"clicked","","")};this.dblClick=function(i,s){const n=v(s);-1!==n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"dblclicked","","")};this.mouseDown=function(i,s){m.capture(null);const n=v(s);if(-1!==n.columnId){t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"mousedown","","");"true"===e.getAttribute("drag")&&n.selected&&t._p_.dragStart(e,s)}};this.mouseUp=function(i,s){const n=v(s);-1!==n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"mouseup","","")};let y=null;function W(i,s,n){const l=v(s);-1!==l.columnId&&t.emit(e,{name:"itemTouchEvent",eventObject:i,event:s},l.nodeId+":"+l.columnId,n)}this.touchStart=function(t,e){if(e.touches.length>1){clearTimeout(y);y=setTimeout((function(){W(t,e,"touchselect")}),1e3)}else{clearTimeout(y);y=setTimeout((function(){W(t,e,"touchselect")}),50)}};this.touchMove=function(t,e){if(1===e.touches.length&&y){clearTimeout(y);y=null}};this.touchEnd=function(t,e){if(y){clearTimeout(y);y=null}};this.rootClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","clicked","","")};this.rootDblClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","dblclicked","","")};this.rootMouseDown=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mousedown","","")};this.rootMouseUp=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mouseup","","")};this.resizeHandleMDown=function(i,s){const n=i.parentNode.className.split(" ")[0];if(n){const l=m.getCssRule("#"+e.id+" ."+n),o=m.pxself(l,"width"),d=document.body.classList.contains("Wt-rtl");let c=-o,u=1e4;d&&([c,u]=[-u,-c]);new m.SizeHandle(m,"h",i.offsetWidth,e.offsetHeight,c,u,"Wt-hsh2",(function(i){const s=o+(d?-i:i),c=1*n.substring(7);l.style.width=s+"px";f.adjustColumns();t.emit(e,"columnResized",c,parseInt(s))}),i,e,s,-2,-1)}};this.FixComputedSize=function(){let t;const i=e.parentElement,s=i?i.parentElement:null;if(i&&i.classList.contains("Wt-fill-width")){h=i;t=i.clientWidth}else if(s&&s.classList.contains("Wt-fill-height")){h=s;t=s.clientWidth}else{h=e;t=e.clientWidth}t+="px";if(null===a){a=h.style.maxWidth;h.style.maxWidth=t}if(null===r){r=h.style.minWidth;h.style.minWidth=t}c=!0;u=!0;setTimeout((function(){u&&f.wtResize()}),0)};this.unfixComputedSize=function(){if(null!==a){h.style.maxWidth=a;a=null}if(null!==r){h.style.minWidth=r;r=null}h=null;c=!1;u=!1};let C=!1;function x(){if(!C||!p)return!1;if(m.isHidden(e))return!1;C=!1;const i=o.firstChild;let s=d.firstChild,l=0,c=0;const u=d.lastChild.className.split(" ")[0],a=m.getCssRule("#"+e.id+" ."+u);n&&(s=s.firstChild);for(const t of s.childNodes)if(t.className){const i=t.className.split(" ")[0],s=m.getCssRule("#"+e.id+" ."+i);if("none"===s.style.display)continue;l+=m.pxself(s,"width")+7}if(!n)if(a.style.width)e.querySelectorAll(`.Wt-headerdiv .${u}`).forEach((function(t){t.style.width=a.style.width+"px"}));else{const t=e.scrollWidth-s.offsetWidth-9-15;t>0&&(a.style.width=t+"px")}if("auto"===a.style.width)return!0;c=l+m.pxself(a,"width")+7;if(n){m.getCssRule("#"+e.id+" .Wt-tv-rowc").style.width=l+"px";f.wtResize();t.layouts2&&t.layouts2.adjust();e.changed=!0}else{d.style.width=i.style.width=c+"px";s.style.width=l+"px"}return!0}this.adjustColumns=function(t=!1){if(!C){C=!0;setTimeout((function(){x();t&&f.unfixComputedSize()}),0)}};this.setItemDropsEnabled=function(t){w=t};this.setRowDropsEnabled=function(t){g=t};let b=null,E=null;e.handleDragDrop=function(n,l,o,d,c){if(b){b.className=b.classNameOrig;b=null}if(E){!function(t){t.style.position="";t.dropVisual.remove();delete t.dropVisual}(E);E=null}if("end"===n)return;const u=v(o);if(!u.selected&&u.drop&&w&&-1!==u.columnId)if("drop"===n)t.emit(e,{name:"itemEvent",eventObject:l,event:o},u.nodeId+":"+u.columnId,"drop",d,c);else{l.className="Wt-valid-drop";b=u.el;b.classNameOrig=b.className;b.className=b.className+" Wt-drop-site"}else if(!u.selected&&g){let a,r="bottom";if(u.nodeId){a=m.$(u.nodeId);r=m.widgetCoordinates(a,o).y-a.clientHeight/2<=0?"top":"bottom"}else{const t=i.getElementsByClassName("Wt-tv-root");a=1===t.length?t[0].lastChild:s}if("drop"===n)t.emit(e,{name:"rowDropEvent",eventObject:l,event:o},u.nodeId+":"+u.columnId,d,c,r);else{l.className="Wt-valid-drop";!function(t,e){if("top"===e){const i=t.previousSibling;if(i){t=i;e="bottom"}}const i=document.createElement("div");i.className="Wt-drop-site-"+e;t.style.position="relative";t.appendChild(i);t.dropVisual=i;E=t}(a,r)}}else l.className=""};let R=null,I=null;this.resetCWidth=function(){if(!c){const t=m.getCssRule("#"+e.id+" .cwidth");R=t.style.width;t.style.width="auto";I=i.style.width;i.style.width="auto"}};this.restoreCWidth=function(){if(c){m.getCssRule("#"+e.id+" .cwidth").style.width=R;R=null;i.style.width=I;I=null}};this.wtResize=function(){if(t.WT.LayoutUninitialized&&0!==t.WT.LayoutUninitialized){setTimeout(f.wtResize,0);return}p=!0;c||t.layouts2&&t.layouts2.isAdjusting()||function(){for(let e=0;e<t.treeViewRegistered.length;e++)t.treeViewRegistered[e].resetCWidth();for(let e=0;e<t.treeViewRegistered.length;e++)t.treeViewRegistered[e].FixComputedSize();for(let e=0;e<t.treeViewRegistered.length;e++)t.treeViewRegistered[e].restoreCWidth()}();let l,a,r=u;u=!1;x();let h=null,w=m.pxself(e,"width");if(0===w){const t=e.parentElement,i=t?t.parentElement:null;w=t&&t.classList.contains("Wt-fill-width")||i&&i.classList.contains("Wt-fill-height")?t.clientWidth:e.clientWidth}else if(m.boxSizing(e)){w-=m.pxComputedStyle(e,"borderLeftWidth");w-=m.pxComputedStyle(e,"borderRightWidth")}let g=i.offsetWidth-i.clientWidth;g>50&&(g=0);i.clientWidth>0&&(w-=g);if(e.classList.contains("column1")){l=e.querySelector(".Wt-headerdiv").lastChild.className.split(" ")[0];a=m.getCssRule("#"+e.id+" ."+l);h=m.pxself(a,"width")}if(w!==i.tw||h!==i.c0w||e.changed){const t=!e.changed;i.tw=w;i.c0w=h;l=e.querySelector(".Wt-headerdiv").lastChild.className.split(" ")[0];a=m.getCssRule("#"+e.id+" ."+l);const c=o.firstChild,u=m.getCssRule("#"+e.id+" .cwidth"),p=u.style.width===c.offsetWidth+1+"px",v=d.firstChild;u.style.width=w+"px";i.style.width=w+g+"px";if(!document.body.classList.contains("Wt-rtl")){s.style.marginRight=g+"px";document.querySelectorAll(`#${e.id} .Wt-scroll`).forEach((function(t){t.style.marginRight=g+"px"}))}if(null!==h){const t=w-h-7;if(t>0){const i=Math.min(t,m.pxself(m.getCssRule("#"+e.id+" .Wt-tv-rowc"),"width"));w-=t-i;d.style.width=w+"px";c.style.width=w+"px";m.getCssRule("#"+e.id+" .Wt-tv-row").style.width=i+"px"}}else if(p){d.style.width=u.style.width;c.style.width=u.style.width}else d.style.width=c.offsetWidth+"px";!n&&c.offsetWidth-v.offsetWidth>=7&&(a.style.width=c.offsetWidth-v.offsetWidth-7+"px");e.changed=!1;if(t){f.adjustColumns(r);r=!1}}r&&f.unfixComputedSize()};this.scrollTo=function(t,e,s,n){if(-1!==e){e*=s;const t=i.scrollTop,l=i.clientHeight;0===n&&(t+l<e?n=1:e<t&&(n=2));switch(n){case 1:i.scrollTop=e;break;case 2:i.scrollTop=e-(l-s);break;case 3:i.scrollTop=e-(l-s)/2}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};let N=0;this.setRowHeight=function(t){N=t};const T=function(){if(0===N)return;const t=i.scrollTop;o.children[0].children[0].style.backgroundPosition="0px "+Math.floor(t/(2*N))*(2*N)+"px"};i.addEventListener?i.addEventListener("scroll",T):i.attachEvent&&i.attachEvent("onscroll",T);f.adjustColumns()}));