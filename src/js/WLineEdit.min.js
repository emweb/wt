WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WLineEdit",function(K,c,g,i,m,s,k,t){function n(){y.trigger("input")}function j(){if(g==="")return c.value;var a=c.value,b="",d="",f=0,h=0;for(f=0;f<a.length;f++){d=a.charAt(f);if(d!==k&&g.charAt(f)!=="_")h+=1;if(d!==k||g.charAt(f)==="_")b+=d}return h>0?b:""}function u(a){return g.charAt(a)==="_"}function l(a){e.setSelectionRange(c,a,a+1)}function o(a){for(;u(a);)a++;l(a);return a}function z(a){for(;a>0&&u(a);)a--;l(a);return a}function A(a,b){if(b>=g.length)return false;
switch(g.charAt(b)){case "a":case "A":return a>=v&&a<=B||a>=w&&a<=C;case "n":case "N":return a>=v&&a<=B||a>=w&&a<=C||a>=p&&a<=q;case "X":case "x":return true;case "0":case "9":return a>=p&&a<=q;case "d":case "D":return a>=D&&a<=q;case "#":return a>=p&&a<=q||a===M||a===N;case "h":case "H":return a>=w&&a<=O||a>=p&&a<=q||a>=v&&a<=P;case "b":case "B":return a===p||a===D}return false}function r(a){var b=c.value.substring(0,a.start),d=c.value.substring(a.end),f=i.substring(a.start,a.end);c.value=b+f+d;
e.setSelectionRange(c,a.start,a.start)}function x(a,b,d){var f=b=b;if(!d&&i.charAt(b)!==a&&!A(a.charCodeAt(0),b)&&b-1>=0&&i.charAt(b-1)===a)return b;for(;i.charAt(b)!==a&&!A(a.charCodeAt(0),b)&&b<g.length;)b++;if(b===g.length)return f;d=c.value.substring(0,b);f=c.value.substring(b+1);if(i.charAt(b)!==a)if(s.charAt(b)===">")a=a.toUpperCase();else if(s.charAt(b)==="<")a=a.toLowerCase();c.value=d+a+f;b++;return b}function E(a){if(!(g===""||c.readOnly)){e.cancelEvent(a,e.CancelDefaultAction);var b=j(),
d=e.getSelectionRange(c);d.start!==d.end&&r(d);var f=undefined;if(window.clipboardData&&window.clipboardData.getData)f=window.clipboardData.getData("Text");else if(a.clipboardData&&a.clipboardData.getData)f=a.clipboardData.getData("text/plain");else{c.value!==b&&n();return}a="";var h=0;for(d=d.start;h<f.length;h++){a=f.charAt(h);d=x(a,d,true)}o(d);b!==j()&&n()}}function F(a){if(!(g===""||c.readOnly)){e.cancelEvent(a,e.CancelDefaultAction);var b=j(),d=e.getSelectionRange(c);if(d.start!==d.end){var f=
c.value.substring(d.start,d.end);if(window.clipboardData&&window.clipboardData.setData)window.clipboardData.setData("Text",f);else a.clipboardData&&a.clipboardData.setData&&a.clipboardData.setData("text/plain",f);r(d)}b!==j()&&n()}}function G(){if(!(g===""||c.readOnly))if(c.value===""){c.value=i;o(0)}}var v="a".charCodeAt(0),P="f".charCodeAt(0),B="z".charCodeAt(0),w="A".charCodeAt(0),O="F".charCodeAt(0),C="Z".charCodeAt(0),M="-".charCodeAt(0),N="+".charCodeAt(0),p="0".charCodeAt(0),D="1".charCodeAt(0),
q="9".charCodeAt(0);c.wtLObj=this;var H=this,e=K.WT,y=$(c);this.getValue=j;this.setValue=function(a){m=a;if(g==="")c.value=a;else if(!(t&1)&&!e.hasFocus(c))c.value=this.getValue();else{var b=e.getSelectionRange(c),d=-1;c.value=i;for(var f=0,h=0,I="";f<a.length;f++){I=a.charAt(f);if(b.start===b.end&&b.start===f)d=h;h=x(I,h,true)}if(e.hasFocus(c))if(d!==-1)l(d);else a.length==0&&l(0)}};this.setInputMask=function(a,b,d,f,h){g=a;i=b;s=f;k=h;H.setValue(d)};g!==""&&this.setInputMask(g,i,m,s,k);this.keyDown=
function(a,b){if(!(g===""||c.readOnly)){a=j();switch(b.keyCode){case 39:e.cancelEvent(b,e.CancelDefaultAction);b=e.getSelectionRange(c);b.end-b.start<=1?o(b.start+1):e.setSelectionRange(c,b.end,b.end);break;case 37:e.cancelEvent(b,e.CancelDefaultAction);b=e.getSelectionRange(c);b.end-b.start<=1?z(b.start-1):e.setSelectionRange(c,b.start,b.start);break;case 36:e.cancelEvent(b,e.CancelDefaultAction);o(0);break;case 35:e.cancelEvent(b,e.CancelDefaultAction);e.setSelectionRange(c,g.length,g.length);break;
case 46:e.cancelEvent(b,e.CancelDefaultAction);b=e.getSelectionRange(c);if(b.end-b.start<=1){b=b.start;if(b<g.length&&!u(b)){var d=c.value.substring(0,b),f=c.value.substring(b+1);c.value=d+k+f;e.setSelectionRange(c,b,b)}}else r(b);break;case 8:e.cancelEvent(b,e.CancelDefaultAction);b=e.getSelectionRange(c);if(b.end-b.start<=1){b=b.start-1;if(b>=0){b=z(b);if(!u(b)){d=c.value.substring(0,b);f=c.value.substring(b+1);c.value=d+k+f;l(b)}}}else r(b);break}a!==j()&&n()}};this.keyPressed=function(a,b){if(!(g===
""||c.readOnly)){a=j();var d=b.charCode||b.keyCode;if(!(d===0||d===13||d===10)){e.cancelEvent(b,e.CancelDefaultAction);b=e.getSelectionRange(c);b.start<b.end&&r(b);b=x(String.fromCharCode(d),b.start);o(b);a!==j()&&n()}}};var J=this.getValue();this.focussed=function(){if(!(g===""||c.readOnly||t&1)){J=this.getValue();setTimeout(function(){H.setValue(m)},0)}};this.blurred=function(){if(!(g===""||c.readOnly||t&1)){m=c.value;c.value=this.getValue();c.value!==J&&y.change()}};this.clicked=function(){if(!(g===
""||c.readOnly)){var a=e.getSelectionRange(c);a.start===a.end&&l(a.start)}};if(c.addEventListener)c.addEventListener("paste",E,false);else c.attachEvent&&c.attachEvent("onpaste",E);if(c.addEventListener)c.addEventListener("cut",F,false);else c.attachEvent&&c.attachEvent("oncut",F);if(c.addEventListener)c.addEventListener("input",G,false);else c.attachEvent&&c.attachEvent("oninput",G);c.wtEncodeValue=function(){return g===""||t&1||e.hasFocus(c)?c.value:m}});
